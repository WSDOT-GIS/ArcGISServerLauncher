<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>ArcGIS Servers</title>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/themes/base/jquery-ui.css" />
    <style type="text/css">
        .ui-ags-url-box {
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>ArcGIS Servers</h1>
    <section>
        <h1>Usage</h1>
        <ol>
            <li>Type the URL of the REST endpoint of an ArcGIS Server.  If the server follows the default naming convention, 
                you can just type the name of the server.</li>
            <li>Click the "Add Server" button.<br />  
                A new list item will be created for this server and saved in the browser's local storage.  This means that the next time you come to the page you will not have to re-enter the servers.
            </li>
            <li>If you want to remove a server from the list, click the "remove" link.</li>
        </ol>
    </section>
    <div id="serverList"></div>
    <!-- Import the jQuery library. -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/jquery-ui.min.js"></script>
    <script src="ArcGisServerList.js" type="text/javascript" charset="utf-8"></script>
    <script>
    /*globals jQuery */
   (function($) {
        var servers = null, serverList, updateLocalStorage;
        
        updateLocalStorage = function() {
            if (typeof(window.localStorage) === "undefined") {
                return;
            }
            if (typeof(serverList) !== "undefined") {
                var servers = serverList.arcGisServerList("getServerNames");
                if (servers) {
                    window.localStorage.agsServers = serverList.arcGisServerList("getServerNames");
                } else {
                    delete window.localStorage.agsServers;
                }
            }
        };
        
        if (typeof(window.localStorage) === "undefined") {
            // Add warning if browser does not support local storage.
            $("<p class='ui-state-error'>This browser does not support <em>local storage</em>.  Servers added during this session will not be saved.  Please use <a href='http://www.caniuse.com/#search=web storage'>a browser that supports local storage</a> (e.g., <a href='http://chrome.google.com'>Google Chrome</a>).</p>").prependTo('body');
        }
        else if (typeof(window.localStorage.agsServers) !== "undefined") {
            servers = window.localStorage.agsServers.split(",");
        }
        serverList = $("#serverList").arcGisServerList({
            servers: servers,
            add: function(event, ui) {
                updateLocalStorage();
            }, 
            remove: function(event, ui) {
                updateLocalStorage();
            }
        });
    }(jQuery));
    </script>
</body>
</html>
